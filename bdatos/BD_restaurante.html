<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Base de Datos - Restaurante</title>
  <style>
    :root {
      --blanco: #ffffff;
      --negro: #000000;
      --guinda: #450505fe;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--blanco);
      color: var(--negro);
    }

    header {
      background: var(--guinda);
      color: var(--blanco);
      padding: 25px;
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: 2.2rem;
    }

    header p {
      font-size: 1.1rem;
    }

    main {
      max-width: 1000px;
      margin: 0 auto;
      padding: 30px;
    }

    h2 {
      color: var(--guinda);
      border-left: 5px solid var(--guinda);
      padding-left: 10px;
      margin-top: 40px;
    }

    ul {
      list-style: none;
      padding-left: 0;
    }

    ul li {
      background: #f6f6f6;
      padding: 10px;
      margin-bottom: 8px;
      border-left: 5px solid var(--guinda);
    }

    .bd img {
      max-width: 90%;
      border: 3px solid var(--guinda);
      border-radius: 10px;
      margin-bottom: 15px;
    }

    pre {
      background: #f6f6f6;
      border-left: 5px solid var(--guinda);
      padding: 15px;
      overflow-x: auto;
      border-radius: 5px;
    }

    .buttons {
      text-align: center;
      margin-top: 20px;
    }

    .buttons button {
      background: var(--guinda);
      color: var(--blanco);
      padding: 12px 20px;
      border: none;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
      margin: 5px;
    }

    .buttons button:hover {
      background: var(--negro);
      color: var(--blanco);
    }
  </style>
</head>
<body>
  <header>
    <h1>Base de Datos - Módulo Restaurante</h1>
    <p>Diseño y creación de la base de datos del sistema de restaurante</p>
  </header>

  <main>
    <!-- Diagrama -->
    <section class="section-content">
      <h2>Diagrama de la Base de Datos</h2>
      <div class="bd">
      <img src="../imagenes/Restaurante_digr.png" alt="Diagrama BD Restaurante" style="max-width:90%;border:3px solid #800000;border-radius:10px;">
      </div>
    </section>

    <!-- Pertinencia de la arquitectura -->
    <section class="section-content">
      <h2>Pertinencia de la Arquitectura de la Base de Datos</h2>
      <ul>
        <li>Modelo relacional con integridad referencial entre mesas, menú y pedidos.</li>
        <li>Escalable para integrar el restaurante con otros módulos (ejemplo: cargos a la cuenta de la habitación del huésped).</li>
        <li>Permite consultas rápidas sobre disponibilidad de mesas, pedidos activos y consumo histórico.</li>
    </ul>
      </ul>
    </section>

    <section>
      <h2>Normalización de la Base de Datos</h2>
      <ul>
        <li><strong>1FN:</strong> Todos los datos son atómicos (ejemplo: nombre_platillo, precio).</li>
        <li><strong>2FN:</strong> Las tablas tienen claves primarias simples (id_mesa, id_menu, id_pedido).</li>
        <li><strong>3FN:</strong> No existen dependencias transitivas (el subtotal depende solo de la cantidad y precio del platillo, no de otro atributo no clave).</li>
    </section>

    <section>
      <h2>Código SQL</h2>
      <pre>
-- Tabla de mesas
CREATE TABLE Mesa (
    id_mesa INT PRIMARY KEY IDENTITY(1,1),
    numero_mesa INT UNIQUE NOT NULL,
    capacidad INT NOT NULL,
    estado VARCHAR(20) NOT NULL CHECK (estado IN ('Disponible','Ocupada','Reservada'))
);

-- Tabla de menú
CREATE TABLE Menu (
    id_menu INT PRIMARY KEY IDENTITY(1,1),
    nombre_platillo VARCHAR(100) NOT NULL,
    descripcion VARCHAR(200),
    precio DECIMAL(10,2) NOT NULL,
    tipo VARCHAR(30) NOT NULL CHECK (tipo IN ('Entrada','Plato Fuerte','Bebida','Postre'))
);

-- Tabla de pedidos
CREATE TABLE Pedido (
    id_pedido INT PRIMARY KEY IDENTITY(1,1),
    id_mesa INT NOT NULL,
    fecha_pedido DATETIME NOT NULL DEFAULT GETDATE(),
    estado VARCHAR(20) NOT NULL CHECK (estado IN ('Pendiente','En Preparación','Servido','Pagado')),
    FOREIGN KEY (id_mesa) REFERENCES Mesa(id_mesa)
);

-- Tabla detalle de pedido (relación muchos a muchos entre Pedido y Menu)
CREATE TABLE Detalle_Pedido (
    id_detalle INT PRIMARY KEY IDENTITY(1,1),
    id_pedido INT NOT NULL,
    id_menu INT NOT NULL,
    cantidad INT NOT NULL CHECK (cantidad > 0),
    subtotal DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (id_pedido) REFERENCES Pedido(id_pedido),
    FOREIGN KEY (id_menu) REFERENCES Menu(id_menu)
);

      </pre>
      <p>Insertando registros de ejemplo:</p>
      <pre>
-- Mesas
INSERT INTO Mesa (numero_mesa, capacidad, estado) VALUES
(1, 4, 'Disponible'),
(2, 2, 'Disponible'),
(3, 6, 'Ocupada'),
(4, 4, 'Reservada');

-- Menú
INSERT INTO Menu (nombre_platillo, descripcion, precio, tipo) VALUES
('Ensalada César', 'Ensalada fresca con pollo y aderezo césar', 120.00, 'Entrada'),
('Filete de Res', 'Filete de res a la parrilla con guarnición', 250.00, 'Plato Fuerte'),
('Sopa Azteca', 'Sopa tradicional mexicana con tortilla y aguacate', 90.00, 'Entrada'),
('Agua de Horchata', 'Bebida fresca de arroz y canela', 45.00, 'Bebida'),
('Pastel de Chocolate', 'Pastel casero con cobertura de chocolate', 80.00, 'Postre');

-- Pedido (Mesa 3 pidió alimentos)
INSERT INTO Pedido (id_mesa, estado) VALUES
(3, 'Pendiente');

-- Detalle del Pedido
INSERT INTO Detalle_Pedido (id_pedido, id_menu, cantidad, subtotal) VALUES
(1, 2, 2, 500.00), -- 2 Filetes de res
(1, 4, 2, 90.00),  -- 2 Aguas de horchata
(1, 5, 1, 80.00);  -- 1 Pastel de chocolate

      </pre>
    </section>




    <div class="buttons">
      <button onclick="location.href='restaurante.html'">Regresar al Módulo Restaurante</button>
      <button onclick="location.href='../index.html'">Regresar a la Interfaz Principal</button>
    </div>
  </main>
</body>
</html>
