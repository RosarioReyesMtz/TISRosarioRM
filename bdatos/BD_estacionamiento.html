<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Base de Datos - Estacionamiento</title>
  <style>
    :root {
      --blanco: #ffffff;
      --negro: #000000;
      --guinda: #450505fe;
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: var(--blanco);
      color: var(--negro);
    }

    header {
      background: var(--guinda);
      color: var(--blanco);
      padding: 25px;
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: 2.2rem;
    }

    header p {
      font-size: 1.1rem;
    }

    main {
      max-width: 1000px;
      margin: 0 auto;
      padding: 30px;
    }

    h2 {
      color: var(--guinda);
      border-left: 5px solid var(--guinda);
      padding-left: 10px;
      margin-top: 40px;
    }

    ul {
      list-style: none;
      padding-left: 0;
    }

    ul li {
      background: #f6f6f6;
      padding: 10px;
      margin-bottom: 8px;
      border-left: 5px solid var(--guinda);
    }

    .bd img {
      max-width: 90%;
      border: 3px solid var(--guinda);
      border-radius: 10px;
      margin-bottom: 15px;
    }

    pre {
      background: #f6f6f6;
      border-left: 5px solid var(--guinda);
      padding: 15px;
      overflow-x: auto;
      border-radius: 5px;
    }

    .buttons {
      text-align: center;
      margin-top: 20px;
    }

    .buttons button {
      background: var(--guinda);
      color: var(--blanco);
      padding: 12px 20px;
      border: none;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
      margin: 5px;
    }

    .buttons button:hover {
      background: var(--negro);
      color: var(--blanco);
    }
  </style>
</head>
<body>
  <header>
    <h1>Base de Datos - Módulo Estacionamiento</h1>
    <p>Diseño y creación de la base de datos del sistema de estacionamiento</p>
  </header>

  <main>
    <!-- Diagrama -->
    <section>
      <h2>Diagrama de la Base de Datos</h2>
      <div class="bd">
        <img src="../imagenes/Estacionamiento_digr.png" alt="Diagrama BD del módulo Estacionamiento">
      </div>
    </section>

    <!-- Pertinencia -->
    <section>
      <h2>Pertinencia de la Arquitectura de la Base de Datos</h2>
      <ul>
        <li>El diseño relacional permite integrar el estacionamiento con huéspedes (en un futuro, relacionando Vehículo con la tabla de Clientes).</li>
        <li>La arquitectura asegura integridad referencial (un vehículo solo puede estar en un espacio válido).</li>
        <li>Escalabilidad: se pueden agregar más tipos de vehículos o ampliar los espacios fácilmente.</li>
      </ul>
    </section>

    <!-- Normalización -->
    <section>
      <h2>Normalización de la Base de Datos</h2>
      <ul>
        <li><strong>1FN:</strong> Datos atómicos (placa, color, estado, etc.).</li>
        <li><strong>2FN:</strong> Clave primaria simple (id_vehiculo, id_espacio).</li>
        <li><strong>3FN:</strong> No hay dependencias transitivas (ejemplo: el estado del espacio depende solo de Espacio_Estacionamiento).</li>
      </ul>
    </section>

    <!-- Código SQL -->
    <section>
      <h2>Código SQL</h2>
      <pre>
-- Tabla de espacios de estacionamiento
CREATE TABLE Espacio_Estacionamiento (
    id_espacio INT PRIMARY KEY IDENTITY(1,1),
    numero_espacio INT UNIQUE NOT NULL,
    estado VARCHAR(20) NOT NULL CHECK (estado IN ('Disponible','Ocupado','Reservado')),
    tipo VARCHAR(20) NOT NULL CHECK (tipo IN ('Automóvil','Motocicleta','Camioneta'))
);

-- Tabla de vehículos
CREATE TABLE Vehiculo (
    id_vehiculo INT PRIMARY KEY IDENTITY(1,1),
    placa VARCHAR(15) UNIQUE NOT NULL,
    marca VARCHAR(50) NOT NULL,
    modelo VARCHAR(50),
    color VARCHAR(30),
    id_espacio INT,
    fecha_ingreso DATETIME NOT NULL,
    fecha_salida DATETIME NULL,
    FOREIGN KEY (id_espacio) REFERENCES Espacio_Estacionamiento(id_espacio)
);

      </pre>

      <p>Insertando registros de ejemplo:</p>
      <pre>
-- Espacios de estacionamiento
INSERT INTO Espacio_Estacionamiento (numero_espacio, estado, tipo) VALUES
(1, 'Disponible', 'Automóvil'),
(2, 'Disponible', 'Automóvil'),
(3, 'Disponible', 'Motocicleta'),
(4, 'Ocupado', 'Camioneta'),
(5, 'Reservado', 'Automóvil');

-- Vehículos registrados
INSERT INTO Vehiculo (placa, marca, modelo, color, id_espacio, fecha_ingreso, fecha_salida) VALUES
('ABC123', 'Toyota', 'Corolla', 'Blanco', 1, '2025-09-18 08:30:00', NULL),
('XYZ789', 'Nissan', 'Versa', 'Negro', 2, '2025-09-18 09:00:00', NULL),
('MOTO22', 'Honda', 'CBR', 'Rojo', 3, '2025-09-18 10:15:00', NULL),
('TRK555', 'Ford', 'Ranger', 'Azul', 4, '2025-09-18 07:45:00', '2025-09-18 12:00:00');

      </pre>
    </section>

    <div class="buttons">
      <button onclick="location.href='../modulos/estacionamiento.html'">Regresar al Módulo Estacionamiento</button>
      <button onclick="location.href='../index.html'">Regresar a la Interfaz Principal</button>
    </div>
  </main>
</body>
</html>
